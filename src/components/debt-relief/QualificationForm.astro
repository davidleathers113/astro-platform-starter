---
// src/components/debt-relief/QualificationForm.astro
---

<div id="qualification-form" class="p-6 sm:p-8 form-container rounded-lg bg-background-form text-text shadow-lg border-2 border-border hover:shadow-xl transition-all">
    <h3 class="mb-6 text-xl font-bold">Quick Debt Relief Check</h3>
    
    <form id="qualification-form-element" class="space-y-6">
        <div class="form-control animate-fade-in-delay-1">
            <label for="debt-amount" class="block mb-2 font-medium">How much debt do you have?*</label>
            <select id="debt-amount" name="debtAmount" class="w-full p-3 border border-border rounded-md bg-input-bg shadow-inner focus:ring-2 focus:ring-primary focus:border-primary transition-all" required>
                <option value="">Select Amount</option>
                <option value="10000-15000">$10,000 - $15,000</option>
                <option value="15000-25000">$15,000 - $25,000</option>
                <option value="25000-50000">$25,000 - $50,000</option>
                <option value="50000+">$50,000+</option>
            </select>
        </div>
        
        <div class="form-control animate-fade-in-delay-2">
            <label for="debt-type" class="block mb-2 font-medium">What type of debt do you have?*</label>
            <select id="debt-type" name="debtType" class="w-full p-3 border border-border rounded-md bg-input-bg shadow-inner focus:ring-2 focus:ring-primary focus:border-primary transition-all" required>
                <option value="">Select Type</option>
                <option value="credit-cards">Credit Cards</option>
                <option value="personal-loans">Personal Loans</option>
                <option value="medical">Medical Debt</option>
                <option value="mixed">Mixed Unsecured Debt</option>
            </select>
        </div>
        
        <div class="form-control animate-fade-in-delay-3">
            <label for="phone" class="block mb-2 font-medium">Phone Number*</label>
            <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="w-full p-3 border border-border rounded-md bg-input-bg shadow-inner focus:ring-2 focus:ring-primary focus:border-primary transition-all" 
                placeholder="(___) ___-____" 
                pattern="^\(\d{3}\) \d{3}-\d{4}$" 
                required
            />
            <small class="text-text-muted">Format: (XXX) XXX-XXXX</small>
        </div>
        
        <button 
            type="submit" 
            class="w-full p-4 text-center font-bold btn btn-lg shadow-md hover:shadow-lg transform hover:-translate-y-1 transition-all animate-pulse-once"
        >
            Check Your Savings Options
        </button>
    </form>
    
    <p class="mt-6 text-xs text-text-muted leading-relaxed">
        By submitting, you authorize DebtFreedom to contact you at the number provided using automated technology. 
        Your information is kept secure and confidential.
    </p>
</div>

<style>
    /* Enhanced focus states for better accessibility */
    select:focus, input:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(66, 165, 178, 0.3);
    }
    
    /* Improve form field appearance on mobile */
    @media (max-width: 640px) {
        select, input {
            font-size: 16px; /* Prevents iOS zoom on focus */
        }
    }
</style>

<script>
// Client-side validation and form handling
document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('qualification-form');
    const phoneInput = document.getElementById('phone');
    
    // Basic phone formatting
    phoneInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 0) {
            if (value.length <= 3) {
                value = `(${value}`;
            } else if (value.length <= 6) {
                value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
            } else {
                value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
            }
        }
        e.target.value = value;
    });
    
    // Form submission
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Basic validation
        const debtAmount = document.getElementById('debt-amount').value;
        const debtType = document.getElementById('debt-type').value;
        const phone = phoneInput.value;
        
        if (!debtAmount || !debtType || !phone.match(/^\(\d{3}\) \d{3}-\d{4}$/)) {
            alert('Please fill out all required fields correctly.');
            return;
        }
        
        // Form submission would go here
        // This is a placeholder for actual submission logic
        alert('Thank you for your submission! A debt relief specialist will contact you shortly.');
        form.reset();
    });
});
</script>
